% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gapfilling.R
\name{fill_proxy_growth}
\alias{fill_proxy_growth}
\title{Fill gaps using growth rates from proxy variables}
\usage{
fill_proxy_growth(
  data,
  value_col,
  proxy_col,
  time_col = year,
  .by = NULL,
  max_gap = Inf,
  max_gap_linear = 3,
  fill_scope = NULL,
  value_smooth_window = NULL,
  proxy_smooth_window = 1,
  output_format = "clean",
  verbose = TRUE
)
}
\arguments{
\item{data}{A data frame containing time series data.}

\item{value_col}{The column containing values to fill.}

\item{proxy_col}{Character or vector. Proxy variable(s) for calculating
growth rates. Supports multiple syntax formats:
\itemize{
\item \strong{Simple numeric proxy} (e.g., \code{"population"}): Auto-detects numeric
columns and uses them as proxy variable. Inherits the \code{.by}
parameter to compute proxy values per group.
\item \strong{Simple categorical proxy} (e.g., \code{"region"}): Auto-detects
categorical columns and interprets as \code{value_col:region}. Aggregates
\code{value_col} by the specified groups.
\item \strong{Advanced syntax} (e.g., \code{"gdp:region"}): Format is
\code{"variable:group1+group2"}. Aggregates variable by specified groups.
\item \strong{Hierarchical fallback} (e.g., \code{c("population", "gdp:region")}):
Tries first proxy, falls back to second if first fails.
\item \strong{Weighted aggregation} (e.g., \code{"gdp[population]"}): Weight variable
by specified column during aggregation.
}}

\item{time_col}{The column containing time values. Default: \code{year}.}

\item{.by}{A character vector with the grouping variables (optional).}

\item{max_gap}{Numeric. Maximum gap size to fill using growth method.
Default: Inf.}

\item{max_gap_linear}{Numeric. Maximum gap size for linear interpolation
fallback. Default: 3.}

\item{fill_scope}{Quosure. Filter expression to limit filling scope.
Default: NULL.}

\item{value_smooth_window}{Integer. Window size for a centered moving
average applied to the value column before gap-filling. Useful for
variables with high inter-annual variability. If \code{NULL} (default), no
smoothing is applied.}

\item{proxy_smooth_window}{Integer. Window size for moving average smoothing
of proxy reference values before computing growth rates. Default: 1.}

\item{output_format}{Character. Output format: "clean" or "detailed".
Default: "clean".}

\item{verbose}{Logical. Print progress messages. Default: TRUE.}
}
\value{
A data frame with filled values. If output_format = "clean", returns
original columns with updated value_col and added source column. If
"detailed", includes all intermediate columns.
}
\description{
Fills missing values using growth rates from a proxy variable (reference
series). Supports regional aggregations, weighting, and linear
interpolation for small gaps.
}
\details{
\strong{Combined Growth Sequence (Hierarchical Interpolation):}

When using multiple proxies with hierarchical fallback, the function
implements an intelligent combined growth sequence strategy:
\enumerate{
\item Better proxies (earlier in hierarchy) are tried first for each gap.
\item If a better proxy has partial coverage within a gap, those growth
rates are used for the covered positions.
\item Fallback proxies fill only the remaining positions where better
proxies are not available.
\item Values filled by better proxies are protected from being overwritten.
}
}
\examples{
# Fill GDP using population as proxy
data <- tibble::tibble(
  country = rep("ESP", 4),
  year = 2010:2013,
  gdp = c(1000, NA, NA, 1200),
  population = c(46, 46.5, 47, 47.5)
)

fill_proxy_growth(
  data,
  value_col = gdp,
  proxy_col = "population",
  .by = "country"
)

}
\seealso{
\code{\link[=fill_linear]{fill_linear()}}, \code{\link[=fill_sum]{fill_sum()}}
}

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Supply and use tables — build_supply_use • whep</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Supply and use tables — build_supply_use"><meta name="description" content="Create a table with processes, their inputs (use) and their
outputs (supply)."><meta property="og:description" content="Create a table with processes, their inputs (use) and their
outputs (supply)."><meta property="og:image" content="https://eduaguilera.github.io/whep/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">whep</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/trade-sources-coverage.html">Trade sources year coverage</a></li>
    <li><a class="dropdown-item" href="../articles/workflow-intro.html">Follow the workflow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/eduaguilera/whep/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Supply and use tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/eduaguilera/whep/blob/main/R/supply_use.R" class="external-link"><code>R/supply_use.R</code></a></small>
      <div class="d-none name"><code>build_supply_use.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a table with processes, their inputs (<em>use</em>) and their
outputs (<em>supply</em>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_supply_use</span><span class="op">(</span></span>
<span>  cbs_version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  feed_intake_version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  primary_prod_version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  primary_residues_version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  processing_coefs_version <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cbs-version">cbs_version<a class="anchor" aria-label="anchor" href="#arg-cbs-version"></a></dt>
<dd><p>File version passed to <code><a href="get_wide_cbs.html">get_wide_cbs()</a></code> call.</p></dd>


<dt id="arg-feed-intake-version">feed_intake_version<a class="anchor" aria-label="anchor" href="#arg-feed-intake-version"></a></dt>
<dd><p>File version passed to <code><a href="get_feed_intake.html">get_feed_intake()</a></code> call.</p></dd>


<dt id="arg-primary-prod-version">primary_prod_version<a class="anchor" aria-label="anchor" href="#arg-primary-prod-version"></a></dt>
<dd><p>File version passed to
<code><a href="get_primary_production.html">get_primary_production()</a></code> call.</p></dd>


<dt id="arg-primary-residues-version">primary_residues_version<a class="anchor" aria-label="anchor" href="#arg-primary-residues-version"></a></dt>
<dd><p>File version passed to
<code><a href="get_primary_residues.html">get_primary_residues()</a></code> call.</p></dd>


<dt id="arg-processing-coefs-version">processing_coefs_version<a class="anchor" aria-label="anchor" href="#arg-processing-coefs-version"></a></dt>
<dd><p>File version passed to
<code><a href="get_processing_coefs.html">get_processing_coefs()</a></code> call.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with the supply and use data for processes.
It contains the following columns:</p><ul><li><p><code>year</code>: The year in which the recorded event occurred.</p></li>
<li><p><code>area_code</code>: The code of the country where the data is from. For code
details see e.g. <code><a href="add_area_name.html">add_area_name()</a></code>.</p></li>
<li><p><code>proc_group</code>: The type of process taking place. It can be one of:</p><ul><li><p><code>crop_production</code>: Production of crops and their residues, e.g. rice
production, coconut production, etc.</p></li>
<li><p><code>husbandry</code>: Animal husbandry, e.g. dairy cattle husbandry, non-dairy
cattle husbandry, layers chickens farming, etc.</p></li>
<li><p><code>processing</code>: Derived subproducts obtained from processing other items.
The items used as inputs are those that have a non-zero processing use in
the commodity balance sheet. See <code><a href="get_wide_cbs.html">get_wide_cbs()</a></code> for more details.
In each process there is a single input. In some processes like olive oil
extraction or soyabean oil extraction this might make sense. Others like
alcohol production need multiple inputs (e.g. multiple crops work), so
in this data there would not be a process like alcohol production but
rather a <em>virtual</em> process like 'Wheat and products processing', giving
all its possible outputs. This is a constraint because of how the data was
obtained and might be improved in the future. See
<code><a href="get_processing_coefs.html">get_processing_coefs()</a></code> for more details.</p></li>
</ul></li>
<li><p><code>proc_cbs_code</code>: The code of the main item in the process taking place.
Together with <code>proc_group</code>, these two columns uniquely represent a
process. The main item is predictable depending on the value of
<code>proc_group</code>:</p><ul><li><p><code>crop_production</code>: The code is from the item for which seed usage
(if any) is reported in the commodity balance sheet (see
<code><a href="get_wide_cbs.html">get_wide_cbs()</a></code> for more). For example, the rice code for a rice
production process or the cottonseed code for the cotton production one.</p></li>
<li><p><code>husbandry</code>: The code of the farmed animal, e.g. bees for beekeeping,
non-dairy cattle for non-dairy cattle husbandry, etc.</p></li>
<li><p><code>processing</code>: The code of the item that is used as input, i.e., the one
that is processed to get other derived products. This uniquely defines a
process within the group because of the nature of the data that was used,
which you can see in <code><a href="get_processing_coefs.html">get_processing_coefs()</a></code>.</p></li>
</ul><p>For code details see e.g. <code><a href="add_item_cbs_name.html">add_item_cbs_name()</a></code>.</p></li>
<li><p><code>item_cbs_code</code>: The code of the item produced or used in the process.
Note that this might be the same value as <code>proc_cbs_code</code>, e.g., in rice
production process for the row defining the amount of rice produced or
the amount of rice seed as input, but it might also have a different
value, e.g. for the row defining the amount of straw residue from rice
production. For code details see e.g. <code><a href="add_item_cbs_name.html">add_item_cbs_name()</a></code>.</p></li>
<li><p><code>type</code>: Can have two values:</p><ul><li><p><code>use</code>: The given item is an input of the process.</p></li>
<li><p><code>supply</code>: The given item is an output of the process.</p></li>
</ul></li>
<li><p><code>value</code>: Quantity in tonnes.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Note: These are smaller samples to show outputs, not the real data.</span></span></span>
<span class="r-in"><span><span class="co"># For all data, call the function with default versions (i.e. no arguments).</span></span></span>
<span class="r-in"><span><span class="fu">build_supply_use</span><span class="op">(</span></span></span>
<span class="r-in"><span>  cbs_version <span class="op">=</span> <span class="st">"20250721T132006Z-8ea47"</span>,</span></span>
<span class="r-in"><span>  feed_intake_version <span class="op">=</span> <span class="st">"20250721T143825Z-c1313"</span>,</span></span>
<span class="r-in"><span>  primary_prod_version <span class="op">=</span> <span class="st">"20250721T145805Z-8e12a"</span>,</span></span>
<span class="r-in"><span>  primary_residues_version <span class="op">=</span> <span class="st">"20250721T150132Z-dfd94"</span>,</span></span>
<span class="r-in"><span>  processing_coefs_version <span class="op">=</span> <span class="st">"20250721T143403Z-216d7"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching files for primary_prod...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching files for crop_residues...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching files for commodity_balance_sheet...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching files for feed_intake...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching files for processing_coefs...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 27,914 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year area_code proc_group      proc_cbs_code item_cbs_code type       value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">1</span>965        38 crop_production          <span style="text-decoration: underline;">2</span>645          <span style="text-decoration: underline;">2</span>645 supply     <span style="text-decoration: underline;">4</span>460 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">1</span>984        50 crop_production          <span style="text-decoration: underline;">2</span>625          <span style="text-decoration: underline;">2</span>625 supply       45 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>003       131 crop_production          <span style="text-decoration: underline;">2</span>577          <span style="text-decoration: underline;">2</span>577 supply 13<span style="text-decoration: underline;">354</span>800 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>996       235 crop_production          <span style="text-decoration: underline;">2</span>517          <span style="text-decoration: underline;">2</span>517 supply     <span style="text-decoration: underline;">1</span>600 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>021        10 crop_production          <span style="text-decoration: underline;">2</span>511          <span style="text-decoration: underline;">2</span>511 supply 31<span style="text-decoration: underline;">922</span>555.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">1</span>970        41 crop_production          <span style="text-decoration: underline;">2</span>605          <span style="text-decoration: underline;">2</span>605 supply     <span style="text-decoration: underline;">7</span>000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">1</span>997       222 crop_production          <span style="text-decoration: underline;">2</span>605          <span style="text-decoration: underline;">2</span>605 supply    <span style="text-decoration: underline;">12</span>000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>003        59 crop_production          <span style="text-decoration: underline;">2</span>662          <span style="text-decoration: underline;">2</span>662 supply     <span style="text-decoration: underline;">2</span>049.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>966       236 crop_production          <span style="text-decoration: underline;">2</span>549          <span style="text-decoration: underline;">2</span>549 supply     <span style="text-decoration: underline;">5</span>891 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>976       105 crop_production          <span style="text-decoration: underline;">2</span>533          <span style="text-decoration: underline;">2</span>533 supply      800 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 27,904 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Catalin Covaci, Eduardo Aguilera, <a href="https://erc.europa.eu/homepage" class="external-link"><img src="https://erc.europa.eu/themes/custom/erc_theme/ERC_FAVICON.png" width="55" alt="European Research Council"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

